---
import Layout from "@layouts/Layout.astro";

export interface Props {
    title: string;
}

const { title } = Astro.props;
const path = Astro.url.pathname;
const isActive = (href: string) =>
    path === href || (href !== "/" && path.startsWith(href));
---

<Layout title={title}>
    <div class="shell">
        <aside class="sidebar" aria-label="Site navigation">
            <div class="sidebar-inner">
                <a class="brand" href="/" aria-label="Home">Alana Morin</a>

                <nav class="side-nav" aria-label="Primary">
                    <a class:list={{ active: isActive("/") }} href="/">Home</a>
                    <a class:list={{ active: isActive("/portfolio") }} href="/portfolio/">Portfolio</a>
                    <a class:list={{ active: isActive("/resume") }} href="/resume/">Resume</a>
                    <a class:list={{ active: isActive("/contact") }} href="/contact/">Contact</a>
                </nav>

                <div class="side-meta" aria-label="External links">
                    <a href="https://www.linkedin.com/in/alana-morin" target="_blank" rel="noopener noreferrer">LinkedIn</a>
                    <a href="https://github.com/alanimus" target="_blank" rel="noopener noreferrer">GitHub</a>
                </div>
            </div>
        </aside>

        <main class="content" id="main">
            <slot />
        </main>
    </div>

    <style>
        @layer custom {
            .shell {
                margin: 0 auto;
                max-width: 1100px;
                padding: 0 var(--space-s);
                display: grid;
                grid-template-columns: 280px 1fr;
                gap: var(--space-l);
                align-items: start;
            }

            .sidebar {
                position: sticky;
                top: var(--space-l);
                align-self: start;
                border: 1px solid var(--color-grey-dark);
                border-radius: var(--border-radius);
                background: color-mix(in oklab, var(--color-grey-dark) 35%, transparent);
            }

            .sidebar-inner {
                padding: var(--space-m);
                display: grid;
                gap: var(--space-m);
            }

            .brand {
                text-decoration: none;
                font-weight: 800;
                font-size: var(--step-1);
                width: fit-content;
            }

            .side-nav {
                display: grid;
                gap: var(--space-xs);
            }

            .side-nav a,
            .side-meta a {
                text-decoration: none;
                width: fit-content;
            }

            .side-nav a:hover,
            .side-nav a:focus-visible,
            .side-meta a:hover,
            .side-meta a:focus-visible {
                text-decoration: underline;
                text-underline-offset: 0.15em;
            }

            .side-nav a.active {
                font-weight: 700;
                text-decoration: underline;
                text-underline-offset: 0.15em;
            }

            .side-meta {
                display: flex;
                flex-wrap: wrap;
                gap: var(--space-xs);
                opacity: 0.9;
            }

            .content {
                min-width: 0;
                padding-block: var(--space-l);
            }

            @media (max-width: 900px) {
                .shell {
                    grid-template-columns: 1fr;
                }
                .sidebar {
                    position: static;
                }
            }
        }
    </style>
</Layout>
